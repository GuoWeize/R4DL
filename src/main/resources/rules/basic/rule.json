[
    {
        "?": false,
        "#": "in_out_include",
        "$": ["functional", "functional"],
        "*": "boolean",
        "~": {
            "or": [
                {
                    "and": [
                        {
                            "include": [
                                {
                                    "&": {"$": 1},
                                    ".": "input"
                                },
                                {
                                    "&": {"$": 2},
                                    ".": "input"
                                }
                            ]
                        },
                        {
                            "include": [
                                {
                                    "&": {"$": 1},
                                    ".": "output"
                                },
                                {
                                    "&": {"$": 2},
                                    ".": "output"
                                }
                            ]
                        }
                    ]
                },
                {
                    "and": [
                        {
                            "include": [
                                {
                                    "&": {"$": 2},
                                    ".": "input"
                                },
                                {
                                    "&": {"$": 1},
                                    ".": "input"
                                }
                            ]
                        },
                        {
                            "include": [
                                {
                                    "&": {"$": 2},
                                    ".": "output"
                                },
                                {
                                    "&": {"$": 1},
                                    ".": "output"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "?": false,
        "#": "operation_contradict",
        "$": ["operation", "operation"],
        "*": "boolean",
        "~": {
            "and": [
                {
                    "==": [
                        {
                            "&": {"$": 1},
                            ".": "reaction"
                        },
                        {
                            "&": {"$": 2},
                            ".": "reaction"
                        }
                    ]
                },
                {
                    "!": [
                        {
                            "&": {"$": 1},
                            ".": "isAble"
                        }
                    ]
                },
                {
                    "!": [
                        {
                            "&": {"$": 2},
                            ".": "isAble"
                        }
                    ]
                },
                {
                    "!=": [
                        {
                            "&": {"$": 1},
                            ".": "isNot"
                        },
                        {
                            "&": {"$": 2},
                            ".": "isNot"
                        }
                    ]
                }
            ]
        }
    },
    {
        "?": false,
        "#": "input_output_condition",
        "$": ["functional", "functional"],
        "*": "boolean",
        ":": "function input_output_condition (functional, functional) -> boolean { for any inEntity in $2$.input( for any outEntity in $1$.output (entity_include(outEntity, inEntity) ) ) }",
        "~": {
            "any": [
                "inEntity",
                {
                    "&": {"$": 2},
                    ".": "input"
                },
                {
                    "any": [
                        "outEntity",
                        {
                            "&": {"$": 1},
                            ".": "input"
                        },
                        {
                            "entity_include": [
                                {"%": "outEntity"},
                                {"%": "inEntity"}
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "?": false,
        "#": "input_output_interlock",
        "$": [{"[]": "functional"}],
        "*": "boolean",
        "~": {
            "and": [
                {
                    ">": [
                        { "size_of": [{"$": 1}] },
                        1
                    ]
                },
                {
                    "input_output_condition": [
                        {
                            "&": {"$": 1},
                            "@": {
                                "-": [
                                    { "size_of": [{"$": 1}] },
                                    1
                                ]
                            }
                        },
                        {
                            "&": {"$": 1},
                            "@": 0
                        }
                    ]
                },
                {
                    "all": [
                        "index",
                        0,
                        {
                            "-": [
                                { "size_of": [{"$": 1}] },
                                2
                            ]
                        },
                        {
                            "input_output_condition": [
                                {
                                    "&": {"$": 1},
                                    "@": {"%": "index"}
                                },
                                {
                                    "&": {"$": 1},
                                    "@": {
                                        "+": [
                                            {"%": "index"},
                                            1
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    }
]